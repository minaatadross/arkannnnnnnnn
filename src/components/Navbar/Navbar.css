.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-sm) var(--space-md);
  background-color: rgba(11, 11, 11, 0.95);
  color: var(--fg);
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000;
  transition: all var(--duration-normal) var(--ease);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(211, 170, 139, 0.1);
  height: 80px; /* Fixed height for easier calculations */
}

.navbar.scrolled {
  background-color: rgba(11, 11, 11, 0.98);
  box-shadow: var(--shadow-lg);
}

.navbar-placeholder {
  height: 80px;
  width: 100%;
}

.navbar-left {
  display: flex;
  align-items: center;
  height: 100%;
}

.navbar-logo {
  width: 220px;
  height: auto;
  cursor: pointer;
  transition: transform var(--duration-normal) var(--ease);
}

.navbar-logo:hover {
  transform: scale(1.02);
}

/* Desktop Menu */
.navbar-right {
  display: flex;
  align-items: center;
  height: 100%;
}

.navbar-menu {
  list-style: none;
  display: flex;
  gap: var(--space-md);
  padding: 0;
  margin: 0;
  align-items: center;
}

.navbar-menu li {
  position: relative;
}

.navbar-menu a {
  color: var(--fg);
  text-decoration: none;
  font-size: var(--text-sm); /* Slightly smaller for better fit */
  font-weight: 500;
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  transition: all var(--duration-normal) var(--ease);
  position: relative;
  white-space: nowrap;
}

.navbar-menu a:hover {
  color: var(--accent);
  background: rgba(211, 170, 139, 0.1);
}

.navbar-menu a::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 50%;
  width: 0;
  height: 2px;
  background: var(--accent);
  transition: all var(--duration-normal) var(--ease);
  transform: translateX(-50%);
}

.navbar-menu a:hover::after {
  width: 100%;
}

/* Desktop Language Switcher */
.navbar-lang-switcher {
  margin-left: var(--space-md);
  display: flex;
  align-items: center;
}

/* Mobile Controls (Hidden on Desktop) */
.navbar-mobile-controls {
  display: none;
}

/* Responsive Styles (Mobile/Tablet) */
@media (max-width: 992px) {
  .navbar {
    justify-content: space-between;
    padding: 0 var(--space-sm); /* Reduce padding on mobile */
  }

  /* Mobile Controls (Visible on Mobile) */
  .navbar-mobile-controls {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  /* Hide desktop language switcher inside the menu to avoid duplication if desired,
     but user wants it "visible at all times". We'll keep it in mobile controls 
     and hide the one in the list. */
  .navbar-lang-switcher {
    display: none !important; 
  }

  /* Burger Icon */
  .burger-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    background: none;
    border: none;
    color: var(--fg);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 4px;
    transition: color var(--duration-fast) var(--ease);
    z-index: 1002;
  }

  .burger-icon:hover {
    color: var(--accent);
  }

  /* Mobile Menu Panel (Slide Down) */
  .navbar-menu {
    position: absolute;
    top: 80px; /* Directly below navbar */
    left: 0;
    width: 100%;
    background-color: var(--bg);
    flex-direction: column; /* Ensure vertical stacking */
    align-items: center;
    gap: 0;
    padding: 0;
    
    /* Animation Props */
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    
    border-bottom: 1px solid rgba(211, 170, 139, 0.1);
    box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
  }

  /* Force column direction for RTL on mobile to fix stacking issue */
  [dir="rtl"] .navbar-menu {
    flex-direction: column !important;
  }

  .navbar-menu.active {
    max-height: 400px; /* Adjust based on content */
    opacity: 1;
    padding: var(--space-md) 0;
  }

  .navbar-menu li {
    width: 100%;
    text-align: center;
    opacity: 0; /* Stagger effect setup */
    transform: translateY(-10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .navbar-menu.active li {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stagger delays for items */
  .navbar-menu.active li:nth-child(1) { transition-delay: 0.1s; }
  .navbar-menu.active li:nth-child(2) { transition-delay: 0.15s; }
  .navbar-menu.active li:nth-child(3) { transition-delay: 0.2s; }
  .navbar-menu.active li:nth-child(4) { transition-delay: 0.25s; }
  .navbar-menu.active li:nth-child(5) { transition-delay: 0.3s; }
  .navbar-menu.active li:nth-child(6) { transition-delay: 0.35s; }

  .navbar-menu a {
    display: block;
    width: 100%;
    padding: var(--space-sm) 0;
    font-size: var(--text-lg);
    border-radius: 0;
  }

  .navbar-menu a:hover {
    background: rgba(211, 170, 139, 0.05);
    color: var(--accent);
  }
  
  .navbar-menu a::after {
    display: none; /* Remove underline on mobile */
  }

  /* Adjust logo size for mobile to prevent overlap */
  .navbar-logo {
    width: 140px;
  }
}

/* RTL Adjustments */
[dir="rtl"] .navbar-mobile-controls {
  /* Ensure controls are on the correct side if needed */
}

[dir="rtl"] .navbar-menu a {
  text-align: center;
}
